<dom-module id="key-visual">
  <template>
    <style>
      :host {
        display: flex;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
        height: 6.6vh;
        width: 6.6vh;
        margin: 0 0.2vh;
        transition-duration: 0.05s;
      }
      .wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 80%;
        height: 80%;
        background: #561252;
        box-shadow: 0 0 6px 2px #982E66;
        border-radius: 10%;
        color: #982E66;
        font-size: 4vh;
        font-family: 'Lato';
        cursor: default;
        pointer-events: none;
      }
      :host([pressed]) .wrapper {
        background: #EC5479;
        border-radius: 10%;
        color: #561252;
        font-weight: bold;
      }
      :host([code='KeyA']) {
        margin-left: 2.5vh;
      }
      :host([code='KeyZ']) {
        margin-left: 5vh;
      }
      :host([code='KeyY']) {
        margin-left: 3.5vh;
      }
      :host([code='KeyH']) {
        margin-left: 3.5vh;
      }
      :host([code='KeyN']) {
        margin-left: 3.5vh;
      }
    </style>

    <div class="wrapper">
      [[char]]
    </div>

  </template>

  <script>
    class KeyVisual extends Polymer.Element {
      static get is() {
        return "key-visual";
      }

      static get config() {
        return {
          properties: {
            code: String,
						char: String,
            finger: String,
            pressed: {
              type: Boolean,
              value: false,
              reflectToAttribute: true,
            }
          }
        }
      }

      constructor() {
        super();
        super.ready();
      }

      connectedCallback() {
        var keyboard = this.parentNode;
        // this.style.transform = keyboard.giveMeMyPostion(this.getAttribute("code"));
        // this.children[0].classList.add(keyboard.getShape(this.getAttribute("code")));

        this.char = keyboard.keyValues[this.code].key.toUpperCase();
        this.finger = keyboard.fingerInfo[this.code].fingerName();
      }

      getRect() {
        var shape = this.shadowRoot.querySelector(".wrapper");
        if (!shape) return null;
        return shape.getBoundingClientRect();
      }
    }
    customElements.define(KeyVisual.is, KeyVisual);
  </script>
</dom-module>
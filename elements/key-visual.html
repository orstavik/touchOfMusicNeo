<dom-module id="key-visual">
  <template>
    <style>
      :host {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-sizing: border-box;
        height: 6.6vh;
        width: 6.6vh;
        margin: 0 0.2vh;
        transition-duration: 0.05s;
      }
      .char {
        position: absolute;
        z-index: 1;
        color: black;
        font-size: 3vh;
        font-family: 'Lato';
        cursor: default;
        pointer-events: none;
      }
      :host([code='KeyA']) {
        margin-left: 2.5vh;
      }
      :host([code='KeyZ']) {
        margin-left: 5vh;
      }
      :host([code='KeyY']) {
        margin-left: 3.5vh;
      }
      :host([code='KeyH']) {
        margin-left: 3.5vh;
      }
      :host([code='KeyN']) {
        margin-left: 3.5vh;
      }
    </style>

    <slot></slot>
    <div class="char">
      [[char]]
    </div>


  </template>

  <script>
    class KeyVisual extends Polymer.Element {
      static get is() {
        return "key-visual";
      }

      static get config() {
        return {
          properties: {
            code: String,
						char: String,
            finger: String,
            tone: Number,
            octave: Number,
            pressed: {
              type: Boolean,
              value: false,
              reflectToAttribute: true,
            }
          }
        }
      }

      constructor() {
        super();
        super.ready();
      }

      connectedCallback() {
        var keyboard = this.parentNode;

        this.char = keyboard.keyValues[this.code].key.toUpperCase();
        this.finger = keyboard.fingerInfo[this.code].fingerName();
      }

      getRect() {
        var shape = this.shadowRoot.querySelector(".wrapper");
        if (!shape) return null;
        return shape.getBoundingClientRect();
      }
    }
    customElements.define(KeyVisual.is, KeyVisual);
  </script>
</dom-module>
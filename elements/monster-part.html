<dom-module id="monster-part">
  <template>
    <style>
      :host {
        display: flex;
        position: absolute;
        align-items: center;
        justify-content: center;
        box-sizing: border-box;
        border-radius: 10%;
        transform-origin: top left;
        /*background-color: rgba(255,255,255,1);*/
        /*border: 1px solid;*/
        transition: border 0.2s cubic-bezier(1,0,1,0);
      }
      .ripple {
        display: flex;
        position: absolute;
        align-items: center;
        justify-content: center;
        width: 144%;
        height: 144%;
        color: rgba(0,0,0,0.75);
        font-weight: bold;
        border-radius: 50%;
        transition-duration: 0.2s;
        background-size: 70%;
        background-position: center;
        background-repeat: no-repeat;
        transform: scale(0);
        pointer-events: none;
      }
    </style>
  
    <div class="ripple"></div>

  </template>

  <script>
    class MonsterPart extends Polymer.Element {
      static get is() {
        return "monster-part";
      }

      static get config() {
        return {
          properties: {
            size: {
              type: Number,
              value: 0.1
            },
            info: {
              type: Object,
              observer: "_applyStyle"
            },
            empty: {
              type: Boolean,
              value: true,
              reflectToAttribute: true
            }
          }
        }
      }

      constructor() {
        super();
        super.ready();
      }

      _applyStyle() {
        var width = Math.abs(this.info.width*this.info.scale.x*this.size);
        var height = Math.abs(this.info.height*this.info.scale.y*this.size);
        var x = this.info.x*this.size;
        var y = this.info.y*this.size;

        this.style.width = width + "vh";
        this.style.height = height + "vh";
        this.style.zIndex = this.info.zIndex + ";";
        this.shadowRoot.querySelector(".ripple").style.backgroundImage = "url(maps/pinkRobot/"+this.info.src+".png)";

        if (this.info.scale.x < 0 && this.info.scale.y < 0) {
          this.style.transform = "translate(" + (x-width) + "vh, " + (y-height) + "vh) rotate(" + this.info.rotate + "deg)";
        } else if (this.info.scale.x < 0 || this.info.scale.y < 0) {
          if (this.info.scale.x < 0) {
            this.style.transform = "translate(" + (x-width) + "vh, " + y + "vh) rotate(" + this.info.rotate + "deg)";
          } else if (this.info.scale.y < 0) {
            this.style.transform = "translate(" + x + "vh, " + (y-height) + "vh) rotate(" + this.info.rotate + "deg)";
          }
        } else {
          this.style.transform = "translate(" + x + "vh, " + y + "vh) rotate(" + this.info.rotate + "deg)";
        }
      }

      fillIt(color, char) {
        // innerOne.style.borderColor = "rgba(0,0,0,0.5)";
        var ripple = this.shadowRoot.querySelector(".ripple");
        // ripple.style.backgroundColor = "rgb(" + color + ")";
        ripple.style.transform = "scale(1)";
        // ripple.style.fontSize = 8 * this.info.scale.y + "vh";
        // ripple.innerText = char;
      }
    }
    customElements.define(MonsterPart.is, MonsterPart);
  </script>
</dom-module>
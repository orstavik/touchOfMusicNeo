<dom-module id="music-tone-visual">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        top: 100px;
        left: 100px;
      }

      .colorClock0 { background-color: hsl(0, 100%, 50%); }
      .colorClock1 { background-color: hsl(30, 100%, 50%); }
      .colorClock2 { background-color: hsl(60, 100%, 50%); }
      .colorClock3 { background-color: hsl(90, 100%, 50%); }
      .colorClock4 { background-color: hsl(120, 100%, 50%); }
      .colorClock5 { background-color: hsl(150, 100%, 50%); }
      .colorClock6 { background-color: hsl(180, 100%, 50%); }
      .colorClock7 { background-color: hsl(210, 100%, 50%); }
      .colorClock8 { background-color: hsl(240, 100%, 50%); }
      .colorClock9 { background-color: hsl(270, 100%, 50%); }
      .colorClock10 { background-color: hsl(300, 100%, 50%); }
      .colorClock11 { background-color: hsl(330, 100%, 50%); }

      .oClock0 { transform:  rotate(0deg);}
      .oClock1 { transform:  rotate(30deg);}
      .oClock2 { transform:  rotate(60deg);}
      .oClock3 { transform:  rotate(90deg);}
      .oClock4 { transform:  rotate(120deg);}
      .oClock5 { transform:  rotate(150deg);}
      .oClock6 { transform:  rotate(180deg);}
      .oClock7 { transform:  rotate(210deg);}
      .oClock8 { transform:  rotate(240deg);}
      .oClock9 { transform:  rotate(270deg);}
      .oClock10 { transform:  rotate(300deg);}
      .oClock11 { transform:  rotate(330deg);}

      .tone0, .tone3, .tone4 {width: 100px; height: 30px;}
      .tone1, .tone2, .tone5 {width: 75px; height: 22px;}
      .tone6 {width: 65px; height: 18px;}
      .tone-1 {width: 0px; height: 0px;}

      #tone {
        transform-origin: left center;
      }

      .offScale {
        display: none;
      }
    </style>
    <div id="tone" class$="tone[[toneSeven]] [[_getRotationClass(tone, key)]] [[_getColorClass(tone)]]">
      <div id="toneText">[[item]]</div>
    </div>
  </template>
  <script>

    class MusicToneVisual extends Polymer.Element {
      static get is() {
        return "music-tone-visual";
      }

      static get config() {
        return {
          properties: {
            tone: String,
            toneSeven: Number,
            key: String,
          }
        }
      }

      _getColorClass(tone){
        return "colorClock" + MusicToneVisual.makeColorDegree(tone);
      }

      _getRotationClass(tone, key){
        return "oClock" + MusicToneVisual.makeToneRotation(tone);
      }

      static makeColorDegree(tone){
        return MusicScale.getWheelOf5Number(tone);
      }

      static makeToneRotation(tone){
        return MusicScale.twelveNotes.indexOf(tone);
      }

      static makeKeyRotation(key){
        return MusicScale.twelveNotes.indexOf(key);
      }

      static makeRelativeRotation(tone, key){
        return (MusicToneVisual.makeToneRotation(tone) + MusicToneVisual.makeKeyRotation(key)) %12;
      }
    }
    customElements.define(MusicToneVisual.is, MusicToneVisual);
  </script>
</dom-module>
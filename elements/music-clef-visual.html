<link rel="import" href="music-tone-visual.html">

<dom-module id="music-clef-visual">
  <template>
    <style>
      :host {
        display: block;
        position: absolute;
        top: 25vh;
        left: 25vh;
      }

      #name {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 1;
        width: 8vh;
        height: 8vh;
        margin: -4vh;
        background: lightgrey;
        border-radius: 50%;
        box-shadow: 0 0 5px 0 black;
        color: black;
        font-size: 2.4vh;
        line-height: 1;
        font-weight: bold;
        text-align: center;
      }
    </style>
    <template is="dom-repeat" id="flower" items="[[twelveNotesWithScale]]">
      <music-tone-visual key="[[key]]" tone="[[item.name]]" tone-seven="[[item.seven]]"></music-tone-visual>
    </template>
    <div id="name">[[key]]<br />[[_substr3(mode)]]</div>
  </template>
  <script>

    class MusicClefVisual extends Polymer.Element {
      static get is() {
        return "music-clef-visual";
      }

      static get config() {
        return {
          properties: {
            mode: String,
            key: String,
            scale: Array,
            twelveNotesWithScale: {
              type: Array,
              computed: "makeMapForScale(scale)",
            }
          }
        }
      }

      _substr3(mode) {
        return mode.substr(0,3);
      }

      makeMapForScale(scale) {
        return MusicScale.twelveNotes.map(function (note) {
          return {
            name: note,
            seven: scale ? scale.indexOf(note) : -1
          };
        });
      }
    }
    customElements.define(MusicClefVisual.is, MusicClefVisual);
  </script>
</dom-module>